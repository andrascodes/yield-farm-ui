(this["webpackJsonpyield-farm-ui"]=this["webpackJsonpyield-farm-ui"]||[]).push([[0],{70:function(e){e.exports=JSON.parse('{"data":[{"key":"compound","name":"Compound","apy":0.05},{"key":"aave","name":"Aave","apy":0.03},{"key":"curve","name":"Curve","apy":0.025}]}')},93:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),i=n.n(c),o=n(136),s=n(145),u=n(71),d=Object(u.a)({palette:{background:{default:"#EAEEF3"}}}),p=n(155),l=n(135),j=n(153),b=n(13),O=n(15);var f,y=n(5);function m(e,t){return Object(O.a)(Object(O.a)({},e),{},{error:t})}function x(e,t){switch(t.type){case"addOpportunities":return function(e,t){var n=t.payload.opportunities.reduce((function(e,t){return e[t.key]=t,e}),{});return Object(O.a)(Object(O.a)({},e),{},{opportunities:n})}(e,t);case"editInitialBalance":return function(e,t){var n=e.opportunityStates;if(Object.keys(n).length>0)return m(e,new Error(f.NO_RESET_AFTER_START));var r=t.payload.amount;return Object(O.a)(Object(O.a)({},e),{},{usdcBalance:r})}(e,t);case"deposit":return function(e,t){var n=t.payload,r=n.amount,a=n.opportunityId,c=e.usdcBalance,i=e.opportunityStates;if(!e.opportunities[a])return m(e,new Error(f.OPPORTUNITY_NOT_FOUND));if(r>c)return m(e,new Error(f.INSUFFICIENT_FUNDS));var o=i[a],s=r,u=0;return o&&(s+=o.depositedAmount,u+=o.accruedInterestAmount),Object(O.a)(Object(O.a)({},e),{},{usdcBalance:c-r,opportunityStates:Object(O.a)(Object(O.a)({},i),{},Object(y.a)({},a,{depositedAmount:s,accruedInterestAmount:u}))})}(e,t);case"withdraw":return function(e,t){var n=t.payload,r=n.amount,a=n.opportunityId,c=e.usdcBalance,i=e.opportunityStates;if(!e.opportunities[a])return m(e,new Error(f.OPPORTUNITY_NOT_FOUND));var o=i[a];if(!o)return m(e,new Error(f.NOT_DEPOSITED));var s=o.depositedAmount,u=o.accruedInterestAmount;if(r>s+u)return m(e,new Error(f.INSUFFICIENT_FUNDS));var d=s,p=u;return r<=u?p-=r:(d-=r-p,p=0),Object(O.a)(Object(O.a)({},e),{},{usdcBalance:c+r,opportunityStates:Object(O.a)(Object(O.a)({},i),{},Object(y.a)({},a,{depositedAmount:d,accruedInterestAmount:p}))})}(e,t);case"progress":return function(e,t){var n=t.payload.days,r=e.opportunityStates,a=e.opportunities,c=Object.keys(r).map((function(e){var t=r[e],c=t.depositedAmount;return{key:e,depositedAmount:c,accruedInterestAmount:t.accruedInterestAmount+c*a[e].apy*(n/365)}}));return Object(O.a)(Object(O.a)({},e),{},{opportunityStates:c.reduce((function(e,t){var n=t.key,r=t.depositedAmount,a=t.accruedInterestAmount;return e[n]={depositedAmount:r,accruedInterestAmount:a},e}),{})})}(e,t);case"reset":return function(e){return Object(O.a)(Object(O.a)({},e),{},{usdcBalance:1e3,opportunityStates:{}})}(e);case"setError":return function(e,t){return m(e,t.payload.error)}(e,t);default:return e}}!function(e){e.OPPORTUNITY_NOT_FOUND="Opportunity not found",e.NOT_DEPOSITED="Can't withdraw from an opportunity where you haven't deposited",e.INSUFFICIENT_FUNDS="Insufficient funds",e.NO_RESET_AFTER_START="You need to reset before changing your USDC balance"}(f||(f={}));var h=n(140),v=n(139),C=n(2),I={setSnackbarOpen:function(){},setSnackbarContent:function(){}},g=a.a.createContext(I);function S(e){var t=e.children,n=Object(r.useState)(!1),a=Object(b.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(),s=Object(b.a)(o,2),u=s[0],d=s[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(h.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:c,autoHideDuration:6e3,onClose:function(){return i(!1)},children:u?Object(C.jsx)(v.a,{severity:u.severity,children:u.message}):void 0}),Object(C.jsx)(g.Provider,{value:{setSnackbarOpen:i,setSnackbarContent:d},children:t})]})}var w={usdcBalance:1e3,started:!1,opportunities:{},opportunityStates:{},error:void 0},k={state:w,started:!1,editInitialBalance:function(){},deposit:function(){},withdraw:function(){},progress:function(){},reset:function(){},addOpportunities:function(){}},A=a.a.createContext(k);function E(e){var t=e.children,n=Object(r.useReducer)(x,w),a=Object(b.a)(n,2),c=a[0],i=a[1],o=Object(r.useContext)(g),s=o.setSnackbarContent,u=o.setSnackbarOpen,d=c.error;Object(r.useEffect)((function(){d?(s({severity:"error",message:null===d||void 0===d?void 0:d.message}),u(!0)):(s(void 0),u(!1))}),[d,s,u]);var p=Object(r.useCallback)((function(e){i({type:"editInitialBalance",payload:{amount:e}})}),[i]),l=Object(r.useCallback)((function(e,t){i({type:"deposit",payload:{opportunityId:e,amount:t}})}),[i]),j=Object(r.useCallback)((function(e,t){i({type:"withdraw",payload:{opportunityId:e,amount:t}})}),[i]),O=Object(r.useCallback)((function(e){i({type:"progress",payload:{days:e}}),s({severity:"info",message:"Progressed by ".concat(e," days")}),u(!0)}),[i,s,u]),f=Object(r.useCallback)((function(){i({type:"reset"}),s({severity:"info",message:"Yield farming has reset"}),u(!0)}),[i,s,u]),y=Object(r.useCallback)((function(e){i({type:"addOpportunities",payload:{opportunities:e}})}),[i]),m=Object(r.useCallback)((function(e){i({type:"setError",payload:{error:e}})}),[i]),h={state:c,started:Object.keys(c.opportunityStates).length>0,editInitialBalance:p,deposit:l,withdraw:j,progress:O,reset:f,addOpportunities:y,setError:m};return Object(C.jsx)(A.Provider,{value:h,children:t})}function T(){return a.a.useContext(A)}var D=n(70);var N=n(147),F=n(148),P=n(149),B=n(137),U=n(150),_=n(151),R=n(142);function Y(){var e=T(),t=e.state.usdcBalance,n=e.started,r=e.editInitialBalance,a=e.reset;return Object(C.jsxs)(N.a,{children:[Object(C.jsxs)(F.a,{children:[Object(C.jsx)(P.a,{variant:"h6",color:"text.primary",gutterBottom:!0,children:"USDC Balance"}),Object(C.jsx)(B.a,{label:"Amount",variant:"filled",value:t,disabled:n,type:"number",inputProps:{min:0},onChange:function(e){var t=parseInt(e.target.value);if(!t)return r(0);r(t)},InputProps:{endAdornment:Object(C.jsx)(U.a,{position:"end",children:"USDC"})}})]}),Object(C.jsx)(_.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(C.jsx)(R.a,{size:"small",onClick:a,children:"Reset"})})]})}var z=n(154),J=n(144),W=n(143),G=n(152);function L(e){var t=e.onClick,n=e.value;return Object(C.jsxs)(W.a,{color:"primary",value:n,exclusive:!0,onChange:function(e,n){"deposit"===n?t("deposit"):"withdraw"===n&&t("withdraw")},children:[Object(C.jsx)(G.a,{value:"deposit",children:"Deposit"}),Object(C.jsx)(G.a,{value:"withdraw",children:"Withdraw"})]})}function M(e){var t=e.opportunityId,n=e.totalAmountDeposited,a=T(),c=a.deposit,i=a.withdraw,o=a.state.usdcBalance,s=Object(r.useState)(0),u=Object(b.a)(s,2),d=u[0],p=u[1],j=Object(r.useState)("deposit"),O=Object(b.a)(j,2),f=O[0],y=O[1],m=Object(r.useCallback)((function(){switch(f){case"deposit":c(t,d);break;case"withdraw":i(t,d)}p(0)}),[f,d,t,c,i]),x="deposit"===f?o:n;return Object(C.jsx)(_.a,{sx:{display:"flex",justifyContent:"center"},children:Object(C.jsxs)(l.a,{direction:"column",spacing:2,children:[Object(C.jsx)(L,{value:f,onClick:y}),Object(C.jsx)(B.a,{label:"Amount",variant:"filled",value:d,type:"number",inputProps:{min:0,max:x},onChange:function(e){var t=parseInt(e.target.value);if(!t)return p(0);p(t)},InputProps:{endAdornment:Object(C.jsx)(U.a,{position:"end",children:"USDC"})}}),Object(C.jsx)(R.a,{variant:"contained",color:"primary",onClick:m,children:"Confirm"})]})})}var H=function(e){return(Math.round(100*e)/100).toFixed(2)};function q(e){var t=e.name,n=e.value;return Object(C.jsxs)(j.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(C.jsx)(P.a,{children:t}),Object(C.jsx)(P.a,{children:n})]})}function K(e){var t=e.opportunity,n=e.opportunityState,r=t.name,a=t.apy,c=t.key,i=n?n.depositedAmount:0,o=n?n.accruedInterestAmount:0;return Object(C.jsx)(J.a,{item:!0,children:Object(C.jsxs)(N.a,{sx:{minWidth:"300px"},children:[Object(C.jsxs)(F.a,{children:[Object(C.jsx)(P.a,{variant:"h6",align:"center",children:r}),Object(C.jsxs)(l.a,{direction:"column",spacing:1,children:[Object(C.jsx)(q,{name:"Current APY:",value:"".concat(100*a,"%")}),Object(C.jsx)(q,{name:"Amount Deposited:",value:"".concat(H(i)," USDC")}),Object(C.jsx)(q,{name:"Accrued Interest:",value:"".concat(H(o)," USDC")})]})]}),Object(C.jsx)(M,{opportunityId:c,totalAmountDeposited:i+o})]})})}function Q(){var e=T().state,t=e.opportunities,n=e.opportunityStates;return t?Object(C.jsx)(J.a,{sx:{flexGrow:1},container:!0,spacing:2,children:Object(C.jsx)(J.a,{item:!0,xs:12,children:Object(C.jsx)(J.a,{container:!0,justifyContent:"center",spacing:3,children:Object.keys(t).map((function(e){return Object(C.jsx)(K,{opportunity:t[e],opportunityState:n[e]},e)}))})})}):Object(C.jsx)(z.a,{})}function V(){var e=T(),t=e.progress,n=e.started,a=Object(r.useState)(0),c=Object(b.a)(a,2),i=c[0],o=c[1];return Object(C.jsxs)(N.a,{children:[Object(C.jsxs)(F.a,{children:[Object(C.jsx)(P.a,{variant:"h6",color:"text.primary",gutterBottom:!0,children:"Progress by"}),Object(C.jsx)(B.a,{label:"Days",variant:"filled",value:i,disabled:!n,type:"number",inputProps:{min:0},onChange:function(e){var t=parseInt(e.target.value);if(!t)return o(0);o(t)},InputProps:{endAdornment:Object(C.jsx)(U.a,{position:"end",children:"days"})}})]}),Object(C.jsx)(_.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(C.jsx)(R.a,{size:"small",onClick:function(){t(i),o(0)},children:"Go"})})]})}var X=function(){return function(){var e=T().addOpportunities;Object(r.useEffect)((function(){e(D.data)}),[e])}(),Object(C.jsx)(p.a,{maxWidth:"xl",sx:{mt:2},children:Object(C.jsxs)(l.a,{direction:"column",spacing:3,children:[Object(C.jsxs)(j.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(C.jsx)(Y,{}),Object(C.jsx)(V,{})]}),Object(C.jsx)(Q,{})]})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,156)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsxs)(s.a,{theme:d,children:[Object(C.jsx)(o.a,{}),Object(C.jsx)(S,{children:Object(C.jsx)(E,{children:Object(C.jsx)(X,{})})})]})}),document.getElementById("root")),Z()}},[[93,1,2]]]);
//# sourceMappingURL=main.95d8e382.chunk.js.map